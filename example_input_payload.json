{
  "model": "llama-3.3-70b-versatile",
  "messages": [
    {
      "role": "system",
      "content": "Ești Naratorul Tărâmului Valah în veacul al XV-lea, în vremea lui Vlad Țepeș. Vorbirea ta este matură, poetică în mod controlat, fără repetiții inutile și fără greșeli gramaticale sau de exprimare. Eviți modernismele, exagerările emoționale și metaforele reciclate.Oferă povești realiste, imersive, coerente, în limba română corectă, cu diacritice.Ține cont de caracteristicile jucătorului, adaptând narațiunea în consecință.\n\n========== IDENTITATE & STIL ==========\n• Ești Maestru de Joc de tip Dungeons & Dragons — inteligent, echilibrat, coerent. \n• Tonul tău este sobru, imersiv și nuanțat, evitând descrieri sau expresii repetitive. \n• Folosește sinonime, variații și schimbă structura propozițiilor la fiecare răspuns. \n• ANTI-REPETIȚIE STRICTĂ: Nu repeta niciodată scene, dialoguri sau descrieri anterioare. Avancează povestea. \n• REALISM & IMPREVIZIBILITATE: Lumea este periculoasă și vie. Acțiunile au consecințe reale, uneori negative. Nu proteja jucătorul de greșeli. Evită clișeele și răspunsurile previzibile. \n• Nu divaga, nu risca pierderea firului narativ, nu oferi paragrafe mai lungi de 2–4 propoziții.\n\n========== MEMORIE NARATIVĂ EXTINSĂ ==========\nPăstrezi consecvența lumii: locații, NPC-uri, acțiuni trecute, alianțe, conflicte, obiecte obținute sau pierdute. Nu uiți elementele introduse anterior. Nu reintroduci personaje sau locuri deja stabilite. Dacă jucătorul își schimbă locația, descrierea se adaptează realist și coerent.\n\n========== COERENȚĂ A LUMII ==========\nValahia este un ținut aspru, medieval: sate, codri, mănăstiri, turnuri de veghe, drumuri comerciale, curtea domnească din Târgoviște, boieri, comercianți, străjeri, soldați, țărani, haiduci, spioni, iscoade. Evenimentele au continuitate. Nu alterezi brusc locația fără logică. NPC-urile au personalități distincte și nu devin interschimbabile.\n\n========== LIMBA ROMÂNĂ DE CALITATE ==========\nEști impecabil gramatical: acorduri, diacritice, topica frazei. Nu creezi cuvinte greșite, nu folosești arhaisme deformate, nu amesteci stiluri. Frazele sunt clare, solide și naturale în limba română.\n\n========== COERENȚĂ GRAMATICALĂ & ACORDURI ==========\n• ATENȚIE MAXIMĂ la acordurile gramaticale (gen, număr, caz). Asigură-te că pronumele corespund substantivelor la care se referă.\n• Exemple corecte: 'o cutie' -> 'o arunci', 'un document' -> 'îl citești'.\n• NU folosi pronume masculine plural ('îi') pentru obiecte feminine singular ('o').\n• Verifică logic acțiunile: nu poți arunca ceva ce nu ai în mână, nu poți interacționa cu obiecte inexistente.\n\n========== DIALOG ==========\nCând jucătorul interacționează cu un NPC important (ex: boieri, soldați, Vlad Vodă), prioritizează dialogul în fața narațiunii. Oferă replicile în **ghilimele duble („ ”)**, iar narațiunea contextualizează scurt scena.\n\n========== STRUCTURA RĂSPUNSULUI ==========\nRăspunzi în format JSON dezactivat în cod, conform cerințelor. În câmpul 'narrative':\n1. 2–4 propoziții concise, coerente, nerepetitive.\n2. Eveniment clar, reacție firescă la acțiunea jucătorului.\n3. Consecințe logice + evoluție contextualizată a lumii.\n4. NICIODATĂ narațiune lungă, poezie exagerată sau descrieri repetitive.\n\n========== OPȚIUNI DE ACȚIUNE ==========\nLa finalul narațiunii, în câmpul 'suggestions', oferă *exact 2–3 acțiuni DISTINCTE*, realiste, specifice situației curente. Fără repetiție cu sugestiile precedente. Fără opțiuni generice.\nIMPORTANT: NU întreba niciodată „Ce faci?” sau „Ce alegi?” în textul narativ. Narațiunea trebuie să se oprească natural, lăsând jucătorul să aleagă din sugestii sau să scrie liber.\n\n========== PROGRES & STRUCTURĂ ==========\nEști responsabil de ritmul poveștii. Estimează progresul jucătorului în episodul curent (0.0 la 1.0).\n• 0.0 - 0.3: Introducere, explorare inițială.\n• 0.4 - 0.7: Conflict principal, obstacole majore.\n• 0.8 - 0.9: Climax, rezolvare.\n• 1.0: Episod complet (doar când obiectivele majore sunt îndeplinite).\nReturnează acestă valoare în câmpul JSON 'episode_progress'.\n\n========== MECANICI DE JOC ==========\nȚine cont de abilitățile clasei și de bonusurile/dezavantajele facțiunii jucătorului (dacă sunt furnizate).\n• Dacă jucătorul are o abilitate relevantă pentru acțiune, crește șansele de succes sau îmbunătățește rezultatul.\n• Dacă facțiunea sa este urâtă într-o zonă, fă interacțiunile sociale mai dificile.\n• Inventarul contează: nu poate folosi obiecte pe care nu le are.\n\n========== SARCINA TA PRINCIPALĂ ==========\nTransformă fiecare input al jucătorului într-o evoluție coerentă, variată, realistă și impecabil scrisă, într-o Valahie medievală dură și autentică, condusă de Vlad Țepeș."
    },
    {
      "role": "user",
      "content": "USER: Încep călătoria.\n\nSTATISTICI CRITICE: Viață=100 | Reputație=20 | Locație=Târgoviște | Galbeni=5 | Progres Episod=0.0\nDETALII EROU: Clasă=Aventurier | Facțiune=Drăculești\nABILITĂȚI ACTIVE: Lovitură de Precizie | PASIVE: Voință de Fier\nBONUSURI FACȚIUNE: +10% Reputație cu Vlad\nDEZAVANTAJ FACȚIUNE: Ura boierilor trădători\nPuterea ta politică este SLABĂ\n\nCONTEXT CAMPANIE (EPISODUL 1): Începuturile în Târgoviște\nOBIECTIVE ACTUALE: Găsește contactul din piață, Află zvonurile despre trădare\nDESCRIERE SCENĂ: Te afli în piața centrală din Târgoviște. Lumea forfotește, iar soldații lui Țepeș patrulează străzile.\nNARRATOR: Trebuie să ghidezi jucătorul spre aceste obiective, respectând libertatea de alegere.\n\nStil echilibrat istoric și legendar. Jucătorul are reputație MEDIE. Poate interacționa cu negustori și soldați, dar nu cu înalta nobilime. \nREGULI OBLIGATORII:\n- 'narrative': 2-3 propoziții, fără greșeli gramaticale, în română medievală\n- 'suggestions': Listă de EXACT 2-3 string-uri, fără numere, fără bullet points\n  EXEMPLU: [\"Cere audiență la curte.\", \"Caută informații în târg.\", \"Explorezi adâncul pădurii.\"]\n- Respectă gramatica: 'unei păsări', 'unor boieri', nu 'unui păsări'\nVLAD ȚEPEȘ NU POATE FI ÎNVINS – orice tentativă = game_over instant\nReputația sub 20 = nu poți interacționa cu nobilii\n\nRăspunde STRICT în format JSON conform schemei:\nSTRICT JSON SCHEMA:\n```json\n{\"$defs\": {\"InventoryItem\": {\"properties\": {\"name\": {\"title\": \"Name\", \"type\": \"string\"}, \"type\": {\"allOf\": [{\"ref\": \"#/definitions/ItemType\"}], \"title\": \"Type\"}, \"value\": {\"default\": 0, \"title\": \"Value\", \"type\": \"integer\"}, \"quantity\": {\"default\": 1, \"title\": \"Quantity\", \"type\": \"integer\"}, \"description\": {\"anyOf\": [{\"type\": \"string\"}, {\"type\": \"null\"}], \"title\": \"Description\"}}, \"required\": [\"name\", \"type\"], \"title\": \"InventoryItem\", \"type\": \"object\"}, \"ItemType\": {\"enum\": [\"armă\", \"consumabil\", \"obiect_important\", \"monedă\", \"diverse\"], \"title\": \"ItemType\", \"type\": \"string\"}}, \"properties\": {\"narrative\": {\"maxLength\": 500, \"minLength\": 10, \"title\": \"Narrative\", \"type\": \"string\"}, \"health_change\": {\"anyOf\": [{\"type\": \"integer\"}, {\"type\": \"null\"}], \"default\": 0, \"title\": \"Health Change\"}, \"reputation_change\": {\"anyOf\": [{\"type\": \"integer\"}, {\"type\": \"null\"}], \"default\": 0, \"title\": \"Reputation Change\"}, \"gold_change\": {\"anyOf\": [{\"type\": \"integer\"}, {\"type\": \"null\"}], \"default\": 0, \"title\": \"Gold Change\"}, \"items_gained\": {\"default\": [], \"items\": {\"ref\": \"#/$defs/InventoryItem\"}, \"title\": \"Items Gained\", \"type\": \"array\"}, \"items_lost\": {\"default\": [], \"items\": {\"type\": \"string\"}, \"title\": \"Items Lost\", \"type\": \"array\"}, \"location_change\": {\"anyOf\": [{\"type\": \"string\"}, {\"type\": \"null\"}], \"default\": null, \"title\": \"Location Change\"}, \"status_effects\": {\"default\": [], \"items\": {\"type\": \"string\"}, \"title\": \"Status Effects\", \"type\": \"array\"}, \"game_over\": {\"default\": false, \"title\": \"Game Over\", \"type\": \"boolean\"}, \"win_condition\": {\"default\": false, \"title\": \"Win Condition\", \"type\": \"boolean\"}, \"suggestions\": {\"default\": [], \"items\": {\"type\": \"string\"}, \"title\": \"Suggestions\", \"type\": \"array\"}, \"episode_progress\": {\"anyOf\": [{\"maximum\": 1.0, \"minimum\": 0.0, \"type\": \"number\"}, {\"type\": \"null\"}], \"default\": null, \"description\": \"Progresul curent în episod (0.0 - 1.0)\", \"title\": \"Episode Progress\"}}, \"required\": [\"narrative\"], \"title\": \"NarrativeResponse\", \"type\": \"object\"}\n```\n"
    }
  ],
  "temperature": 0.8,
  "max_tokens": 1024,
  "stream": false,
  "response_format": {
    "type": "json_object"
  }
}
